<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Genesis â€” Login (Standalone)</title>
    <!-- Tailwind via CDN for quick standalone styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Small page-level tweaks to match the in-project look */
        body {
            background-color: #f3f4f6;
        }
    </style>
</head>

<body>
    <div class="min-h-full flex items-center justify-center mt-10">
        <div class="w-full max-w-2xl bg-white rounded-2xl shadow-lg p-8 mt-10">
            <h2 class="text-center text-2xl font-semibold text-gray-800 mb-6">Genesis Pa Khayelitsha</h2>

            <p id="error" class="hidden text-red-500 text-sm text-center mb-4"></p>

            <!-- Standalone form: posts nowhere by default, JS handles demo validation -->
            <form id="loginForm" class="space-y-5" action="#" method="post" onsubmit="return false;">
                <!-- CSRF token placeholder (remove when integrating with Django) -->
                <input type="hidden" name="csrfmiddlewaretoken" value="PLACEHOLDER_CSRF_TOKEN">

                <div>
                    <label for="id_username" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
                    <input id="id_username" name="username" type="text"
                        class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        placeholder="you@example.com" required autofocus>
                </div>

<script>
(function () {
  // Make the standalone demo form behave like a real form:
  // - set a real action (current path if none)
  // - fill CSRF from cookie into the hidden csrf input (common for Django)
  // - remove the demo onsubmit="return false;" so normal POST works
  // - disable submit button on submit to avoid duplicates

  const form = document.getElementById('loginForm');
  const submitBtn = document.getElementById('submitBtn');

  if (!form) return;

  // If form action is a demo placeholder, point to the current path
  const action = form.getAttribute('action') || '';
  if (action === '#' || action.trim() === '') {
    form.setAttribute('action', window.location.pathname);
  }

  // Helper to read cookies (for Django csrftoken)
  function getCookie(name) {
    const v = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
    return v ? v.pop() : null;
  }

  // Ensure there is a valid csrf token in the hidden input
  (function ensureCsrf() {
    const csrfInput = form.querySelector('input[name="csrfmiddlewaretoken"]');
    const cookieToken = getCookie('csrftoken');

    if (csrfInput) {
      if ((!csrfInput.value || csrfInput.value === 'PLACEHOLDER_CSRF_TOKEN') && cookieToken) {
        csrfInput.value = cookieToken;
      }
    } else if (cookieToken) {
      const hidden = document.createElement('input');
      hidden.type = 'hidden';
      hidden.name = 'csrfmiddlewaretoken';
      hidden.value = cookieToken;
      form.prepend(hidden);
    }
  })();

  // Remove the demo-blocking inline handler and allow normal submission
  form.removeAttribute('onsubmit');

  // Prevent double submit and provide minimal UX
  form.addEventListener('submit', function () {
    if (submitBtn) {
      submitBtn.disabled = true;
      submitBtn.classList.add('opacity-60', 'cursor-not-allowed');
    }
  });
})();
</script>

                <div>
                    <label for="id_password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                    <input id="id_password" name="password" type="password"
                        class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        placeholder="Your password" required>
                </div>

                <button id="submitBtn" type="submit"
                    class="w-full py-2 rounded-md bg-indigo-600 text-white font-medium hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-400">
                    Sign In
                </button>

                <!-- next placeholder -->
                <input type="hidden" name="next" value="/">
            </form>

            <div class="mt-4 text-center">
                <a href="#" id="forgot" class="text-sm text-indigo-600 hover:underline">Forgot Password?</a>
            </div>
        </div>
    </div>

</body>

</html>